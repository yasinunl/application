{"ast":null,"code":"import axios from \"axios\";\nconst instance = axios.create({\n  baseURL: \"http://127.0.0.1:5000/api/\",\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\ninstance.interceptors.response.use(res => {\n  console.log(res);\n  return res;\n}, async error => {\n  if (error.response.status === 401) {\n    console.log(\"asd\");\n    const response = await axios.post('/user/refresh', {}, {\n      withCredentials: true\n    });\n    console.log(response);\n    if (response.status === 200) {\n      axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + response.data[\"access_token\"];\n      return axios(error.config);\n    }\n  }\n  return error;\n});","map":{"version":3,"names":["axios","instance","create","baseURL","headers","interceptors","response","use","res","console","log","error","status","post","withCredentials","defaults","common","data","config"],"sources":["D:/Yasinn/React/freelance/src/interceptors/axios.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n    baseURL: \"http://127.0.0.1:5000/api/\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n\r\ninstance.interceptors.response.use(\r\n    res => {console.log(res); return res},async error => {\r\n        if(error.response.status === 401){\r\n            console.log(\"asd\")\r\n            const response = await axios.post('/user/refresh', {}, {withCredentials: true});\r\n            console.log(response);\r\n            if (response.status === 200){\r\n                axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + response.data[\"access_token\"]\r\n\r\n                return axios(error.config)\r\n            }\r\n        }\r\n        return error;\r\n    }\r\n)"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGD,KAAK,CAACE,MAAM,CAAC;EAC1BC,OAAO,EAAE,4BAA4B;EACrCC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEJH,QAAQ,CAACI,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC9BC,GAAG,IAAI;EAACC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;EAAE,OAAOA,GAAG;AAAA,CAAC,EAAC,MAAMG,KAAK,IAAI;EACjD,IAAGA,KAAK,CAACL,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAC;IAC7BH,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IAClB,MAAMJ,QAAQ,GAAG,MAAMN,KAAK,CAACa,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,EAAE;MAACC,eAAe,EAAE;IAAI,CAAC,CAAC;IAC/EL,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;IACrB,IAAIA,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAC;MACxBZ,KAAK,CAACe,QAAQ,CAACX,OAAO,CAACY,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGV,QAAQ,CAACW,IAAI,CAAC,cAAc,CAAC;MAE1F,OAAOjB,KAAK,CAACW,KAAK,CAACO,MAAM,CAAC;IAC9B;EACJ;EACA,OAAOP,KAAK;AAChB,CAAC,CACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}