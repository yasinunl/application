{"ast":null,"code":"import axios from \"axios\";\nconst access_token = localStorage.getItem('access_token');\naxios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\naxios.defaults.baseURL = \"http://127.0.0.1:5000/api/\";\naxios.interceptors.response.use(res => res, async error => {\n  if (error.response.status === 404) {\n    console.log(\"asd\");\n    try {\n      console.log(access_token, '----------------');\n      const response = await axios.post('/user/refresh', {}, {\n        headers: {\n          'Authorization': `Basic ${access_token}`\n        }\n      });\n      console.log(response);\n      if (response.status === 200) {\n        axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + response.data[\"access_token\"];\n        return axios(error.config);\n      }\n    } catch {\n      return;\n    }\n  }\n  return error;\n});","map":{"version":3,"names":["axios","access_token","localStorage","getItem","defaults","headers","common","baseURL","interceptors","response","use","res","error","status","console","log","post","data","config"],"sources":["D:/Yasinn/React/freelance/src/interceptors/axios.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst access_token = localStorage.getItem('access_token')\r\naxios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token\r\naxios.defaults.baseURL = \"http://127.0.0.1:5000/api/\"\r\n\r\naxios.interceptors.response.use(\r\n    res => res,async error => {\r\n        if(error.response.status === 404){\r\n            console.log(\"asd\")\r\n            try{\r\n                console.log(access_token,'----------------')\r\n                const response = await axios.post('/user/refresh', {}, {\r\n                    headers : {'Authorization': `Basic ${access_token}`}\r\n                });\r\n                console.log(response);\r\n            if (response.status === 200){\r\n                axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + response.data[\"access_token\"]\r\n\r\n                return axios(error.config)\r\n            }\r\n            }catch{\r\n                return\r\n            }\r\n                \r\n        }\r\n        return error;\r\n    }\r\n)"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;AACzDH,KAAK,CAACI,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGL,YAAY;AACzED,KAAK,CAACI,QAAQ,CAACG,OAAO,GAAG,4BAA4B;AAErDP,KAAK,CAACQ,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC3BC,GAAG,IAAIA,GAAG,EAAC,MAAMC,KAAK,IAAI;EACtB,IAAGA,KAAK,CAACH,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAC;IAC7BC,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IAClB,IAAG;MACCD,OAAO,CAACC,GAAG,CAACd,YAAY,EAAC,kBAAkB,CAAC;MAC5C,MAAMQ,QAAQ,GAAG,MAAMT,KAAK,CAACgB,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,EAAE;QACnDX,OAAO,EAAG;UAAC,eAAe,EAAG,SAAQJ,YAAa;QAAC;MACvD,CAAC,CAAC;MACFa,OAAO,CAACC,GAAG,CAACN,QAAQ,CAAC;MACzB,IAAIA,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAC;QACxBb,KAAK,CAACI,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGG,QAAQ,CAACQ,IAAI,CAAC,cAAc,CAAC;QAE1F,OAAOjB,KAAK,CAACY,KAAK,CAACM,MAAM,CAAC;MAC9B;IACA,CAAC,OAAK;MACF;IACJ;EAEJ;EACA,OAAON,KAAK;AAChB,CAAC,CACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}